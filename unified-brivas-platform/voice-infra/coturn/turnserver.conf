# coturn TURN Server Configuration
# For NAT traversal in WebRTC calls

# Network settings
listening-port=3478
tls-listening-port=5349
alt-listening-port=3479
alt-tls-listening-port=5350

# External IP (required for NAT traversal)
# external-ip=YOUR_PUBLIC_IP
relay-ip=0.0.0.0

# Realm
realm=turn.brivas.com
server-name=turn.brivas.com

# Authentication
# Use long-term credentials
lt-cred-mech
use-auth-secret
static-auth-secret=${TURN_AUTH_SECRET}

# Or use database for user credentials
# userdb=/etc/turnserver.db
# psql-userdb="host=lumadb port=5432 dbname=brivas_turn user=turn password=pwd"

# TLS certificates
cert=/etc/coturn/certs/turn.pem
pkey=/etc/coturn/certs/turn-key.pem
# ca-file=/etc/coturn/certs/ca.pem
# dh-file=/etc/coturn/certs/dhparam.pem

# Cipher suites
cipher-list="ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384"

# Logs
log-file=/var/log/coturn/turnserver.log
simple-log
# verbose

# Security
no-multicast-peers
no-cli
# denied-peer-ip=10.0.0.0-10.255.255.255
# allowed-peer-ip=0.0.0.0-255.255.255.255

# Quotas
total-quota=1000
bps-capacity=0
stale-nonce=600
max-bps=10000000

# Relay threads
relay-threads=4

# Mobility
mobility

# Allocate ports range
min-port=49152
max-port=65535

# Fingerprint
fingerprint

# Prometheus metrics
prometheus
prometheus-port=9641

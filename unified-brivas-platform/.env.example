# Detachable Microservices Configuration
# This file provides centralized environment configuration for service discovery
# enabling microservices to work across multiple servers/clusters

# ===========================================
# SERVICE DISCOVERY
# ===========================================
# When services are distributed across clusters, set these to the actual addresses
# Default values assume local docker-compose deployment

# Core Infrastructure
LUMADB_URL=postgres://brivas:brivas_secret@lumadb:5432/brivas
REDIS_URL=redis://lumadb:6379
KAFKA_BROKERS=lumadb:9092

# Service Discovery (Consul)
CONSUL_HTTP_ADDR=consul:8500
CONSUL_ENABLED=false

# NATS Messaging (Cross-cluster events)
NATS_URL=nats://nats:4222

# ===========================================
# MICROSERVICE ENDPOINTS
# ===========================================
# Override these when services run on different hosts/clusters

# Gateway
API_GATEWAY_URL=http://api-gateway:8080

# Telecom Services
VOICE_SWITCH_URL=http://voice-switch:8095
USSD_GATEWAY_URL=http://ussd-gw:8091
SMSC_URL=http://smsc:8090
UNIFIED_MESSAGING_URL=http://unified-messaging:8093

# Workflow
TEMPORAL_HOST=temporal
TEMPORAL_PORT=7233
TEMPORAL_NAMESPACE=brivas
TEMPORAL_UI_URL=http://temporal-ui:8088

# ===========================================
# ANALYTICS (QuestDB replaces kdb+)
# ===========================================
# QuestDB - High-performance open-source time-series DB
# 11.4M rows/sec ingestion, sub-2ms query latency
QUESTDB_HOST=questdb
QUESTDB_PG_PORT=8812
QUESTDB_HTTP_PORT=9000
QUESTDB_ILP_PORT=9009

# ClickHouse - OLAP warehouse
CLICKHOUSE_URL=http://clickhouse:8123
CLICKHOUSE_TCP_PORT=9000

# ===========================================
# STREAMING
# ===========================================
REDPANDA_BROKERS=redpanda:9092
REDPANDA_SCHEMA_REGISTRY=http://redpanda:8081

# ===========================================
# OBSERVABILITY
# ===========================================
GRAFANA_URL=http://grafana:3000
PROMETHEUS_URL=http://prometheus:9090
JAEGER_URL=http://jaeger:16686

# ===========================================
# SERVICE MESH (Cilium/Linkerd)
# ===========================================
# Enable when using service mesh for mTLS and observability
SERVICE_MESH_ENABLED=false
SERVICE_MESH_PROVIDER=cilium

# ===========================================
# CROSS-CLUSTER CONFIGURATION
# ===========================================
# Set these when microservices span multiple clusters/datacenters
CLUSTER_NAME=primary
CLUSTER_REGION=default
MULTI_CLUSTER_ENABLED=false

# Service registration for multi-cluster
SERVICE_ADVERTISE_ADDR=
SERVICE_TAGS=
